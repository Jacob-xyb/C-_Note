# 初始C语言

## 基础语法

### printf()

`printf()`不会在行尾自动添加换行符，运行结束后，光标就停留在输出结束的地方，不会自动换行。为了让光标移到下一行的开头，可以在输出文本的结尾，添加一个换行符`\n`。

`printf()`是在标准库的头文件`stdio.h`定义的。使用这个函数之前，必须在源码文件头部引入这个头文件。

```c
#include <stdio.h>
int main(void) {
  printf("Hello World\n");
}
```

#### printf 中的占位符

`printf()`可以在输出文本中指定占位符。所谓“占位符”，就是这个位置可以用其他值代入。

```c
printf("%s says it is %i o'clock\n", "Ben", 21);
// Ben says it is 21 o'clock
```

- `%a`：浮点数。
- `%A`：浮点数。
- `%c`：字符。
- `%d`：十进制整数。
- `%e`：使用科学计数法的浮点数，指数部分的`e`为小写。
- `%E`：使用科学计数法的浮点数，指数部分的`E`为大写。
- `%i`：整数，基本等同于`%d`。
- `%f`：小数（包含`float`类型和`double`类型）。
- `%g`：6个有效数字的浮点数。整数部分一旦超过6位，就会自动转为科学计数法，指数部分的`e`为小写。
- `%G`：等同于`%g`，唯一的区别是指数部分的`E`为大写。
- `%hd`：十进制 short int 类型。
- `%ho`：八进制 short int 类型。
- `%hx`：十六进制 short int 类型。
- `%hu`：unsigned short int 类型。
- `%ld`：十进制 long int 类型。
- `%lo`：八进制 long int 类型。
- `%lx`：十六进制 long int 类型。
- `%lu`：unsigned long int 类型。
- `%lld`：十进制 long long int 类型。
- `%llo`：八进制 long long int 类型。
- `%llx`：十六进制 long long int 类型。
- `%llu`：unsigned long long int 类型。
- `%Le`：科学计数法表示的 long double 类型浮点数。
- `%Lf`：long double 类型浮点数。
- `%n`：已输出的字符串数量。该占位符本身不输出，只将值存储在指定变量之中。
- `%o`：八进制整数。
- `%p`：指针。
- `%s`：字符串。
- `%u`：无符号整数（unsigned int）。
- `%x`：十六进制整数。
- `%zd`：`size_t`类型。
- `%%`：输出一个百分号。

#### 格式化输出

`printf()`可以定制占位符的输出格式。

1. 限定宽度

   `printf()`允许限定占位符的最小宽度。

2. 总是显示正负号

   可以在占位符的`%`后面加一个`+`，确保输出的数值总带有正负号

   ```c
   // 默认右对齐，空格填充
   printf("%5d\n", 123);  // '  123'
   // 左对齐
   printf("%-5d\n", 123); // '123  '
   
   printf("%12f\n", 123.45);  // '  123.450000'
   printf("%6f\n", 123.45);  // '123.450000'
   
   // 总是显示正负号
   printf("%+d\n", 12); // 输出 +12
   printf("%+d\n", -12); // 输出 -12
   ```

3. 限定小数位数

   输出小数时，有时希望限定小数的位数。举例来说，希望小数点后面只保留两位，占位符可以写成`%.2f`。

   最小宽度和小数位数这两个限定值，都可以用`*`代替，通过`printf()`的参数传入。

   ```c
   printf("%*.*f\n", 6, 2, 0.5);
   // 等同于
   printf("%6.2f\n", 0.5);
   ```

   ---

   ```c
   void func_printf_limit_digits() {
   	printf("%.2f\n", 1.2345); // 1.23
   
   	// 限制位数只限制小数点后位数，对整数无效
   	printf("%.2d\n", 12345); // 12345
   
   	// 采用 * 代替限定值
   	printf("%.*f\n", 2, 1.2345); // 1.23
   	printf("%*.*f\n", 5, 2, 1.2345); // ' 1.23'
   	printf("%+*.*f\n", 5, 2, 1.2345); // +1.23
   }
   ```

4. 输出部分字符串

   `%s`占位符用来输出字符串，默认是全部输出。如果只想输出开头的部分，可以用`%.[m]s`指定输出的长度，其中`[m]`代表一个数字，表示所要输出的长度。

   ```c
   printf("%.5s\n", "hello world"); // hello
   ```

## 变量

C 语言会在变量声明时，就为它分配内存空间，但是不会清除内存里面原来的值。这导致声明变量以后，变量会是一个随机的值。所以，变量一定要赋值以后才能使用。

注意，赋值表达式有返回值，等于等号右边的值。

```c
int x, y;
x = 1;
y = (x = 2 * x);
```

上面代码中，变量`y`的值就是赋值表达式（`x = 2 * x`）的返回值`2`。

由于赋值表达式有返回值，所以 C 语言可以写出多重赋值表达式。

```c
int x, y, z, m, n;
x = y = z = m = n = 3;
```

## 运算符

### 加减乘除

运算符`/`用来完成除法。注意，两个整数相除，得到还是一个整数。

```c
float x = 6 / 4;
printf("%f\n", x); // 输出 1.000000
```

运算符`%`表示求模运算，即返回两个整数相除的余值。这个运算符只能用于整数，不能用于浮点数。

负数求模的规则是，结果的正负号由第一个运算数的正负号决定。

```c
11 % -5 // 1
-11 % -5 // -1
-11 % 5 // -1
```

### 自增自减

这两个运算符放在变量的前面或后面，结果是不一样的。`++var`和`--var`是先执行自增或自减操作，再返回操作后`var`的值；`var++`和`var--`则是先返回操作前`var`的值，再执行自增或自减操作。

### 逻辑运算符

逻辑运算符提供逻辑判断功能，用于构建更复杂的表达式，主要有下面三个运算符。

- `!`：否运算符（改变单个表达式的真伪）。
- `&&`：与运算符（两侧的表达式都为真，则为真，否则为伪）。
- `||`：或运算符（两侧至少有一个表达式为真，则为真，否则为伪）。

```c
if (!(x < 12))
    printf("x is not less than 12\n");
```

上面示例中，由于否运算符`!`具有比`<`更高的优先级，所以必须使用括号，才能对表达式`x < 12`进行否运算。当然，合理的写法是`if (x >= 12)`，这里只是为了举例。

### 位运算符

1. 取反运算符`～`

   a 取反的结果是 -(a+1)

### 逗号运算符

逗号运算符用于将多个表达式写在一起，从左到右依次运行每个表达式。

```c
int x;
x = 1, 2, 3;
// = 比 , 有更高的优先级，所以 x=1
printf("%d\n", x);  // 1

// 但是整个语句的返回值为最后一个表达式的值
int y;
y = (x = 1, 2, 3);
printf("%d\n", y);  // 3
```

### 运算符优先级

- 圆括号（`()`）
- 自增运算符（`++`），自减运算符（`--`）
- 一元运算符（`+`和`-`）
- 乘法（`*`），除法（`/`）
- 加法（`+`），减法（`-`）
- 关系运算符（`<`、`>`等）
- 赋值运算符（`=`）

# 基本数据类型

