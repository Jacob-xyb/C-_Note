# 职工管理系统

# 管理系统需求

职工管理系统可以用来管理公司内所有员工的信息

本教程主要利用C++来实现一个基于多态的职工管理系统



公司中职工分为三类：普通员工、经理、老板，显示信息时，需要显示职工编号、职工姓名、职工岗位、以及职责

普通员工职责：完成经理交给的任务

经理职责：完成老板交给的任务，并下发任务给员工

老板职责：管理公司所有事务



管理系统中需要实现的功能如下：

- 退出管理程序：退出当前管理系统
- 增加职工信息：实现批量添加职工功能，将信息录入到文件中，职工信息为：职工编号、姓名、部门编号
- 显示职工信息：显示公司内部所有职工的信息
- 删除离职职工：按照编号删除指定的职工
- 修改职工信息：按照编号修改职工个人信息
- 查找职工信息：按照职工的编号或职工的姓名进行查找相关的人员信息
- 按照编号排序：按照职工编号，进行排序，排序规则由用户指定
- 清空所有文档：清空文件中记录的所有职工信息（清空前需要再次确认，防止误删）

界面示意图：

![image-20211014162816083](https://i.loli.net/2021/10/14/eNSLjDxE5c4BCIy.png)

# 创建管理类

管理类复制的内容如下：

- 与用户沟通的菜单界面
- 对职工增删查改的操作
- 与文件的读写交互

## 创建文件

在头文件和源文件的文件夹下分别创建`workerManager.h`和`workerManager.cpp`文件

## 头文件实现

在`workerManager.h`中设计管理类

代码如下：

```cpp
#pragma once
#include <iostream>
using namespace std;

class WorkerManager
{
public:
	//构造函数
	WorkerManager();
	//析构函数
	~WorkerManager();

private:

};
```

## 源文件实现

在`workerManager.cpp`中将构造函数和析构函数实现补全

代码如下：

```cpp
#include "workerManager.h"

WorkerManager::WorkerManager()
{
}

WorkerManager::~WorkerManager()
{
}
```

# 功能菜单

功能描述：与用户的沟通界面

## 添加成员函数

在管理类`workerManager.h`中添加成员函数`void Show_Menu()`

代码如下：

```cpp
#pragma once
#include <iostream>
using namespace std;

class WorkerManager
{
public:
	//构造函数
	WorkerManager();

	//展示菜单
	void Show_Menu();

	//析构函数
	~WorkerManager();

private:

};
```

## 菜单功能实现

在`workerManager.cpp`进行实现

代码如下：

```cpp
#include "workerManager.h"

WorkerManager::WorkerManager()
{
}

void WorkerManager::Show_Menu()
{
	cout << "**********************************" << endl;
	cout << "****  欢迎使用职工管理系统！  ****" << endl;
	cout << "********  0.退出管理程序  ********" << endl;
	cout << "********  1.增加职工信息  ********" << endl;
	cout << "********  2.显示职工信息  ********" << endl;
	cout << "********  3.删除离职职工  ********" << endl;
	cout << "********  4.修改职工信息  ********" << endl;
	cout << "********  5.查找职工信息  ********" << endl;
	cout << "********  6.按照编号排序  ********" << endl;
	cout << "********  7.清空所有文档  ********" << endl;
	cout << "**********************************" << endl;
	cout << endl;
}

WorkerManager::~WorkerManager()
{
}
```

## 菜单功能测试

在`职工管理系统.cpp`中测试菜单功能

```cpp
#include <iostream>
#include "workerManager.h"

using namespace std;

int main()
{
	WorkerManager wm;
	//展示菜单成员函数
	wm.Show_Menu();

	std::cout << "press [ENTER] to continue " << std::endl;
	std::cin.get();
	return 0;
}
```

# 退出功能

## 提供功能接口

在main函数中提供分支选择，提供每个功能接口

```cpp
#include <iostream>
#include "workerManager.h"

using namespace std;

int main()
{
	WorkerManager wm;


	int choice = 0;		//存储用户的选项

	while (true)
	{
		//展示菜单成员函数
		wm.Show_Menu();

		cout << "请输入您的选择： " << endl;
		cin >> choice;	//接受用户的选项

		switch (choice)
		{
		case 0:				//退出管理程序
			wm.ExitSystem();
			break;
		case 1:				//增加职工信息
			break;
		case 2:				//显示职工信息
			break;
		case 3:				//删除离职职工	
			break;
		case 4:				//修改职工信息
			break;
		case 5:				//查找职工信息
			break;
		case 6:				//按照编号排序
			break;
		case 7:				//清空所有文档
			break;
		default:
			system("cls");
			break;
		}
	}

	std::cout << "press [ENTER] to exit " << std::endl;
	std::cin.get();
	return 0;
}
```

## 实现退出功能

在 `workerManager.h` 中提供退出系统的成员函数 `void exitSystem();`

在 `workerManager.cpp` 中提供具体的功能实现

```cpp
void WorkerManager::ExitSystem()
{
	cout << "欢迎下次使用" << endl;
	system("pause");
	exit(0);
}
```

## 测试功能

在main函数分支0选项中，调用退出程序的接口

# 创建职工类

## 创建职工抽象类

职工的分类为：普通员工、经理、老板

将三种职工抽象到一个类（worker）中，利用多态管理不同职工种类

职工的属性为：职工编号、职工姓名、职工所在部门编号

职工的行为为：岗位职责信息描述，获取岗位名称



头文件文件夹下，创建`work.h`头文件

```cpp
#pragma once
#include <iostream>

using namespace std;

//职工抽象基类
class Worker
{
public:
	//显示个人信息	//纯虚函数
	virtual void showInfo() = 0;
	//获取岗位名称	//纯虚函数
	virtual string getDeptName() = 0;

	int m_ID;		//职工编号
	string m_Name;	//职工姓名
	int m_DeptId;	//职工所在部门名称编号
};
```

## 创建普通员工类

普通员工类 **继承** 职工抽象类，并重写父类中虚函数

在头文件和源文件的文件夹下分别创建 `employee.h` 和 `employee.cpp` 文件

`employee.h` 中代码如下：

```cpp
#pragma once
#include <iostream>
#include "Worker.h"

using namespace std;

//员工类
class Employee :public Worker
{
public:
	//构造函数
	Employee(int id, string name, int dId);

	//显示个人信息
	virtual void showInfo();

	//获取职工岗位名称
	virtual string getDeptName();
};
```

`employee.cpp`中代码如下；

```cpp
#include "employee.h"

Employee::Employee(int id, string name, int dId)
{
	this->m_ID = id;
	this->m_Name = name;
	this->m_DeptId = dId;
}
void Employee::showInfo()
{
	cout << "职工编号：" << this->m_ID
		<< "\t职工姓名：" << this->m_Name
		<< "\t岗位：" << this->getDeptName()
		<< "\t岗位职责：完成经理交给的任务" << endl;
}
string Employee::getDeptName()
{
	return string("员工");
}
```

## 创建经理类

经理类 **继承** 职工抽象类，并重写父类中纯虚函数，和普通员工类似

在头文件和源文件的文件夹下分别创建`manager.h`和`manager.cpp`文件

`manager.h`中代码如下：

```cpp
#pragma once
#include <iostream>
#include "Worker.h"

using namespace std;

//经理类
class Manager :public Worker
{
public:
	//构造函数
	Manager(int id, string name, int dId);

	//显示个人信息
	virtual void showInfo();

	//获取职工岗位名称
	virtual string getDeptName();
};
```

`manager.cpp`中代码如下

```cpp
#include "manager.h"

Manager::Manager(int id, string name, int dId)
{
	this->m_ID = id;
	this->m_Name = name;
	this->m_DeptId = dId;
}
void Manager::showInfo()
{
	cout << "职工编号：" << this->m_ID
		<< "\t职工姓名：" << this->m_Name
		<< "\t岗位：" << this->getDeptName()
		<< "\t岗位职责：完成老板交给的任务，并下发任务给员工" << endl;
}
string Manager::getDeptName()
{
	return string("经理");
}
```

## 创建老板类

老板类 **继承** 职工抽象类，并重写父类中纯虚函数，和普通员工类似

在头文件和源文件的文件夹下分别创建`boss.h`和`boss.cpp`文件

`boss.h`中代码如下：

```cpp
#pragma once
#include <iostream>
#include "Worker.h"

using namespace std;

//经理类
class Boss :public Worker
{
public:
	//构造函数
	Boss(int id, string name, int dId);

	//显示个人信息
	virtual void showInfo();

	//获取职工岗位名称
	virtual string getDeptName();
};

```

`boss.cpp`中代码如下：

```cpp
#include "boss.h"

Boss::Boss(int id, string name, int dId)
{
	this->m_ID = id;
	this->m_Name = name;
	this->m_DeptId = dId;
}
void Boss::showInfo()
{
	cout << "职工编号：" << this->m_ID
		<< "\t职工姓名：" << this->m_Name
		<< "\t岗位：" << this->getDeptName()
		<< "\t岗位职责：管理公司所有事务" << endl;
}
string Boss::getDeptName()
{
	return string("总裁");
}
```

## 测试多态

在`职工管理系统.cpp`中添加测试函数，并且运行能够产生多态

测试代码如下：

```cpp
#include "employee.h"
#include "manager.h"
#include "boss.h"

void test()
{
	Worker* worker = NULL;
	worker = new Employee(1, "张三", 1);
	worker->showInfo();
	delete worker;

	worker = new Manager(2, "李四", 2);
	worker->showInfo();
	delete worker;

	worker = new Boss(3, "王五", 3);
	worker->showInfo();
	delete worker;
}
```

<img src="https://i.loli.net/2021/10/15/eAJUWGz8YjowNDR.png" alt="image-20211015140215827"  />

# 添加职工

功能描述：批量添加职工，并且保存到文件中

## 功能分析

分析：

用户在批量创建时，可能会创建不同种类的职工

如果想将所有不同种类的员工都放入到一个数组中，可以将所有员工的指针维护到一个数组里

如果想在程序中维护这个不定长度的数组，可以将数组创建到堆区，并利用`Worker*`的指针维护